<!DOCTYPE html>
<html lang="en">
    <head>
        {% load static %}
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="{%static 'css/mypage.css' %}">
    </head>
    <body>
    {% include 'shared/_navbar.html' %}
    <div class = "container">
        <div class='mypage '>
            <img src="{%static 'image/teamwork.png' %}" width="100px" height="100px" style="margin-bottom: 20px;">
            <P>마이페이지</p>
        </div>
        {% if user.username == "user" %}
        <h2>{{user.last_name}} {{user.first_name}}</h2>
        {% else %}
        <h2>{{user.username}}</h2>
        {% endif %}
        {% if request.user != user %}
        {% if request.user.profile in user.profile.followers.all %}
        <a href="{% url 'users:follow' user.id %}"><button>언팔로우</button></a>
        {% else %}
        <a href="{% url 'users:follow' user.id %}"><button>팔로우</button></a>
        {% endif %}
        {% endif %}
        <div class="container">
          <h3>팔로워{{user.profile.followers.count}}명</h3>
          {%for follower in user.profile.followers.all %}
          {% if follower.user.username == "user" %}
          <a href="{% url 'users:mypage' follower.user.id %}">{{follower.user.last_name}} {{follower.user.first_name}}</a>
          {% else %}
          <a href="{% url 'users:mypage' follower.user.id %}">{{follower.user.username}}</a>
          {% endif %}
          {% endfor %}
          <h3>팔로잉{{user.profile.followings.count}}명</h3>
          {% for following in user.profile.followings.all %}
          {% if following.user.username == "user" %}
          <a href="{% url 'users:mypage' following.user.id %}">{{following.user.last_name}} {{following.user.first_name}}</a>
          {% else %}
          <a href="{%url 'users:mypage' following.user.id%}">{{following.user.username}}</a>
          {% endif %}
          {% endfor %}
          </div>
      <div>  
        <span>내가 쓴 글 목록</span>
        <table class="profile" style=" width: 60%;">
            <thead>
            <tr>
              <th scope="cols" width=10%>순번</th>
              <th scope="cols" width=40%>제목</th>
              <th scope="cols" width=35%>날짜</th>
            </tr>
            </thead>
            <tbody>
            {% for post in posts %} 
            <tr onclick="location.href='{% url 'main:detail' post.id %}'">
                <td>{{ forloop.counter }}</td>
                <td>{{ post.title }}</td>
                <td>{{ post.pub_date }}</td>  
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>    
    </body>
    <style>
        table {
    border-collapse: collapse;
    text-align: left;
    line-height: 1.5;
    border-left: 1px solid #ccc;
    margin: auto;
  }
  
  table thead th {
    padding: 10px;
    font-weight: bold;
    border-top: 1px solid #ccc;
    border-right: 1px solid #ccc;
    border-bottom: 2px solid #c00;
    background: #dcdcd1;
  }
  table tbody th {
    width: 150px;
    padding: 10px;
    font-weight: bold;
    vertical-align: top;
    border-right: 1px solid #ccc;
    border-bottom: 1px solid #ccc;
    background: #ececec;
  }
  table td {
    width: 350px;
    padding: 10px;
    vertical-align: top;
    border-right: 1px solid #ccc;
    border-bottom: 1px solid #ccc;
    background: white;
  }
    </style>
</html>